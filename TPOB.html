<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>
    Teaching Behavior   
  </title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>


<head>

<style type="text/css">
  .button {
  background-color: #e7e7e7; 
  color: black;
  border: none;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}

.buttonStart{
  background-color: #4CAF50; /* Green */
}

.buttonEnd{
  background-color: #f44336; /* Red */
}

.buttonReset{
  background-color: #008CBA; /* Blue */
}

.button:active {
           
            box-shadow: 3px 2px 22px 1px rgba(0, 0, 0, 0.24);
            /* Lowering the shadow */
        }

</style>  
<script type="text/javascript">
var c=0;
var t;
var timer_is_on=0;
var alltimerStamp = []
var timerStampB1 = []
var timerStampB2 = []
var locale = 0
var cum1 = []
var cum2 = []
var cum3 = []
var cum4 = []
var cum5 = []
var cum6 = []
var cum7 = []
var sum1 = 0
var sum2 = 0
var sum3 = 0
var sum4 = 0
var sum5 = 0
var sum6 = 0

/*function onStart() {
  if (locale < 2){
charting(1,1,1,1,1,1);  
}
}
*/

function reset(){
location.reload();
}

function timedCount()
{
document.getElementById('rollingTime').innerHTML= "Timer: " + c + ' seconds';
c=c+1;
t=setTimeout("timedCount()",1000);
}

function endTimer()
{
clearTimeout(t);
document.getElementById("startBtn").disabled = true;
document.getElementById("endBtn").disabled = true;
document.getElementById("resetBtn").disabled = false;
}

function onTimer()
{ 
 document.getElementById("startBtn").disabled = true;
document.getElementById("resetBtn").disabled = true;
  if (!timer_is_on)
  {
  timer_is_on=1;
  timedCount();
  }
}


function httpGet(theUrl)
{
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
    xmlHttp.send( null );
    //return xmlHttp.responseText;
}

var text =""  

function timeStampB1(){
locale = locale + 1 
  alltimerStamp.push(c-1);
  //document.getElementById('b1').innerHTML=alltimerStamp;
  cum1.push(alltimerStamp[locale-1] - alltimerStamp[locale-2])
  cum1[0] = 0
  sum1 = cum1.reduce((a, b) => a + b, 0);
  
  //document.getElementById('locale').innerHTML=locale;
  //document.getElementById('sum1').innerHTML="Sum 1: " + sum1;
  fbk=document.getElementById("fb").value;
  document.getElementById("fb").value="";
  URL = "https://docs.google.com/forms/d/e/1FAIpQLSdQXvDqKk1okpc-duZB8QmoAJ2fFI5uS94cJkFOF6x_YpbzNg/formResponse?&entry.1692929060=Management&entry.641186823="+ fbk +"&submit=Submit";
  fetch(URL,{method : "GET",mode: 'no-cors'});
  charting(sum1,sum2,sum3,sum4,sum5,sum6);
  text += (c-1) + " - Management - " + fbk + "<br><br>"
  document.getElementById("data").innerHTML = text;

}

function timeStampB2(){
locale = locale + 1 
  alltimerStamp.push(c-1);
  //document.getElementById('b2').innerHTML=alltimerStamp;
  cum2.push(alltimerStamp[locale-1] - alltimerStamp[locale-2])
  cum2[0] = 0
  sum2 = cum2.reduce((a, b) => a + b, 0);
  //document.getElementById('locale').innerHTML=locale;
  //document.getElementById('sum2').innerHTML="Sum 2: " + sum2;
  fbk=document.getElementById("fb").value;
  document.getElementById("fb").value="";
  URL = "https://docs.google.com/forms/d/e/1FAIpQLSdQXvDqKk1okpc-duZB8QmoAJ2fFI5uS94cJkFOF6x_YpbzNg/formResponse?&entry.1692929060=Transition&entry.641186823="+fbk+"&submit=Submit";
  fetch(URL,{method : "GET",mode: 'no-cors'});
  charting(sum1,sum2,sum3,sum4,sum5,sum6);
  text += (c-1) + " - Transition - " + fbk + "<br><br>"
  document.getElementById("data").innerHTML = text;
}

function timeStampB3(){
locale = locale + 1 
  alltimerStamp.push(c-1);
  //document.getElementById('b3').innerHTML=alltimerStamp;
  cum3.push(alltimerStamp[locale-1] - alltimerStamp[locale-2])
  cum3[0] = 0
  sum3 = cum3.reduce((a, b) => a + b, 0);
  //document.getElementById('locale').innerHTML=locale;
  //document.getElementById('sum3').innerHTML="Sum 3: " + sum3;
  fbk=document.getElementById("fb").value;
  document.getElementById("fb").value="";
  URL = "https://docs.google.com/forms/d/e/1FAIpQLSdQXvDqKk1okpc-duZB8QmoAJ2fFI5uS94cJkFOF6x_YpbzNg/formResponse?&entry.1692929060=Waiting&entry.641186823="+fbk+"&submit=Submit";
  fetch(URL,{method : "GET",mode: 'no-cors'});
  text += (c-1) + " - Waiting - " + fbk + "<br><br>";
  document.getElementById("data").innerHTML = text;
  charting(sum1,sum2,sum3,sum4,sum5,sum6);
}

function timeStampB4(){
locale = locale + 1 
  alltimerStamp.push(c-1);
  //document.getElementById('b4').innerHTML=alltimerStamp;
  cum4.push(alltimerStamp[locale-1] - alltimerStamp[locale-2])
  cum4[0] = 0
  sum4 = cum4.reduce((a, b) => a + b, 0);
  //document.getElementById('locale').innerHTML=locale;
  //document.getElementById('sum4').innerHTML="Sum 4: " + sum4;
  fbk=document.getElementById("fb").value;
  document.getElementById("fb").value="";
  URL = "https://docs.google.com/forms/d/e/1FAIpQLSdQXvDqKk1okpc-duZB8QmoAJ2fFI5uS94cJkFOF6x_YpbzNg/formResponse?&entry.1692929060=Knowledge&entry.641186823="+fbk+"&submit=Submit";
  fetch(URL,{method : "GET",mode: 'no-cors'});
  text += (c-1) + " - Knowledge - " + fbk + "<br><br>";
  document.getElementById("data").innerHTML = text;
  charting(sum1,sum2,sum3,sum4,sum5,sum6);
}

function timeStampB5(){
locale = locale + 1 
  alltimerStamp.push(c-1);
  //document.getElementById('b5').innerHTML=alltimerStamp;
  cum5.push(alltimerStamp[locale-1] - alltimerStamp[locale-2])
  cum5[4] = 0
  sum5 = cum5.reduce((a, b) => a + b, 0);
  //document.getElementById('locale').innerHTML=locale;
  //document.getElementById('sum2').innerHTML="Sum 5: " + sum5;
  fbk=document.getElementById("fb").value;
  document.getElementById("fb").value="";
  URL = "https://docs.google.com/forms/d/e/1FAIpQLSdQXvDqKk1okpc-duZB8QmoAJ2fFI5uS94cJkFOF6x_YpbzNg/formResponse?&entry.1692929060=Activity&entry.641186823="+fbk+"&submit=Submit";
  fetch(URL,{method : "GET",mode: 'no-cors'});
    text += (c-1) + " - Activity - " + fbk + "<br><br>";
    document.getElementById("data").innerHTML = text;
  charting(sum1,sum2,sum3,sum4,sum5,sum6);
}

function timeStampB6(){
locale = locale + 1 
  alltimerStamp.push(c-1);
  //document.getElementById('b6').innerHTML=alltimerStamp;
  cum6.push(alltimerStamp[locale-1] - alltimerStamp[locale-2])
  cum6[5] = 0
  sum6 = cum6.reduce((a, b) => a + b, 0);
  //document.getElementById('locale').innerHTML=locale;
  //document.getElementById('sum6').innerHTML="Sum 6: " + sum6;
  fbk=document.getElementById("fb").value;
  document.getElementById("fb").value="";
  URL = "https://docs.google.com/forms/d/e/1FAIpQLSdQXvDqKk1okpc-duZB8QmoAJ2fFI5uS94cJkFOF6x_YpbzNg/formResponse?&entry.1692929060=OffTask&entry.641186823="+fbk+"&submit=Submit";
  fetch(URL,{method : "GET",mode: 'no-cors'});
  text += (c-1) + " - Off Task - " + fbk + "<br><br>";
  document.getElementById("data").innerHTML = text;
  charting(sum1,sum2,sum3,sum4,sum5,sum6);
}

function charting(s1,s2,s3,s4,s5,s6){
var xValues = ["Management", "Transition", "Waiting", "Knowledge", "Activity", 
"Off Task"];
var yValues = [s1,s2,s3,s4,s5,s6];
var barColors = [
  "#b91d47",
  "#00aba9",
  "#2b5797",
  "#e8c3b9",
  "#1e7145",
  "yellow"
];

new Chart("myChart", {
  type: "pie",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    title: {
      display: true,
      text: "Teaching Behavior"
    }
  }
})

}

</script>
<body>  
<p>Teaching Behavior Tracker for Teaching Practice</p>
<body onload="onStart()">   
<canvas id="myChart" style="width:50%;max-width:600px"></canvas>
<br>
<p id="rollingTime">Timer: 0 seconds</p>
<input id="startBtn" type="button" class="button buttonStart" value="Start" onclick="onTimer()" />
<input id="endBtn" type="button" class="button buttonEnd" value="End" onclick="endTimer()" />
<input id="resetBtn" type="button" class="button buttonReset" value="Reset" onclick="reset()" />

<br>
<br>
<p>Comments:</p> 
<textarea type="feedback" cols="40" rows = "5" id="fb"></textarea>
<br>
<br>
<input type="button" class="button" value="Management" onclick="timeStampB1()" />
<br>
<br>
<input type="button" class="button" value="Transition" onclick="timeStampB2()" />
<br>
<br>
<input type="button" class="button" value="Waiting" onclick="timeStampB3()" />
<br>
<br>
<input type="button" class="button" value="Knowledge" onclick="timeStampB4()" />
<br>
<br>
<input type="button" class="button" value="Activity" onclick="timeStampB5()" />
<br>
<br>
<input type="button" class="button" value="Off task" onclick="timeStampB6()" />
<br>
<br>
<p id="data"></p> 
</body>
</html>
